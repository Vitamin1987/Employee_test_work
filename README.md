# Employee_test_work
Скрипт подсчёта зарплаты сотрудников

1. Описание проекта
Проект представляет собой консольное приложение на Python для обработки данных сотрудников и генерации отчётов по их заработной плате. Скрипт читает данные из CSV-файлов, переданных в качестве аргументов, и формирует отчёт типа payout (зарплата сотрудников и общая сумма выплат). Реализация выполнена с учётом возможности расширения для добавления новых типов отчётов.

Основные функции:
Чтение данных сотрудников из CSV-файлов.
Генерация отчёта payout: список сотрудников с их зарплатами и общая сумма выплат.
Поддержка обработки нескольких CSV-файлов.
Обработка ошибок (например, несуществующие файлы, неверный тип отчёта).
Покрытие тестами с использованием pytest.

2. Требования
Функциональные требования:
Скрипт принимает пути к CSV-файлам через аргументы командной строки.
Тип отчёта указывается через параметр --report (поддерживается только payout).

Формат отчёта payout:
Employee: Alice Johnson, Department: Marketing, Payout: $8000
Employee: Bob Smith, Department: Design, Payout: $6000
Total payout: $14000

Нефункциональные требования:
Используется только стандартная библиотека Python (кроме тестов):
Для парсинга аргументов: argparse.
Чтение CSV-файлов: вручную, без использования библиотеки csv.
Код покрыт тестами с использованием pytest.
Соответствует стандартам PEP 8.
Используются аннотации типов.

Дополнительные возможности:
Обработка ошибок: проверка существования файлов, валидности данных, корректности типа отчёта.
Архитектура позволяет добавлять новые типы отчётов через регистрацию в словаре REPORTS.

3. Структура проекта
Проект организован следующим образом:

project/
├── main.py               # Главный скрипт, точка входа
├── employee.py           # Класс Employee для представления сотрудника
├── report.py             # Модуль для генерации отчётов
├── tests/                # Папка с тестами
│   ├── test_employee.py  # Тесты для класса Employee
│   └── test_report.py    # Тесты для отчётов
├── data1.csv             # Пример CSV-файла с данными сотрудников

Описание файлов:
main.py:
Точка входа в приложение.
Парсит аргументы командной строки (argparse).
Читает CSV-файлы и вызывает генерацию отчёта.

Функции:
read_csv_file(file_path): Читает CSV-файл и возвращает список словарей с данными сотрудников.
main(): Основная функция, координирует работу приложения.

employee.py:
Содержит класс Employee для представления сотрудника.
Атрибуты: id, email, name, department, hours_worked, hourly_rate.

Методы:
__post_init__(): Проверяет валидность данных (например, отрицательные значения часов).
calculate_payout(): Рассчитывает зарплату сотрудника (hours_worked * hourly_rate).

report.py:
Отвечает за генерацию отчётов.
Переменные и функции:

REPORTS: Словарь для регистрации отчётов (для расширяемости).
generate_payout_report(employees): Генерирует отчёт payout.
generate_report(report_type, employees): Вызывает нужный отчёт по типу.

tests/test_employee.py:
Тесты для класса Employee.
Проверяет расчёт зарплаты и валидацию данных (например, отрицательные часы).

tests/test_report.py:
Тесты для отчётов.
Проверяет корректность отчёта payout и работу с пустым списком сотрудников.

data1.csv:
Пример входного файла:

id,email,name,department,hours_worked,hourly_rate
1,alice@example.com,Alice Johnson,Marketing,160,50
2,bob@example.com,Bob Smith,Design,150,40
3,carol@example.com,Carol Williams,Design,170,60

4. Установка и запуск
Требования к окружению:

Python 3.11.9 или выше.
Для тестов: pytest (установить через pip install pytest).

Установка:
Склонируйте или создайте проектную структуру, как указано выше.
Создайте виртуальное окружение (опционально):

python -m venv .venv
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows

Установите pytest для тестов:
pip install pytest

Запуск скрипта:
Создайте CSV-файл с данными сотрудников (например, data1.csv).

Запустите скрипт:
python main.py data1.csv --report payout

Пример вывода:

Employee: Alice Johnson, Department: Marketing, Payout: $8000
Employee: Bob Smith, Department: Design, Payout: $6000
Employee: Carol Williams, Department: Design, Payout: $10200
Total payout: $24200

Запуск тестов:
Убедитесь, что pytest установлен.
Запустите тесты:
python -m pytest tests/
Ожидаемый результат: все тесты проходят (4 теста).

5. Расширение функционала
Добавление нового отчёта
Чтобы добавить новый тип отчёта (например, среднюю почасовую ставку по отделам):
Откройте файл report.py.

Создайте новую функцию для отчёта:

def generate_average_rate_report(employees: List[Employee]) -> str:
    if not employees:
        return "No employees to calculate average rate."
    departments: Dict[str, List[float]] = {}
    for emp in employees:
        if emp.department not in departments:
            departments[emp.department] = []
        departments[emp.department].append(emp.hourly_rate)
    output = []
    for dept, rates in departments.items():
        avg_rate = sum(rates) / len(rates)
        output.append(f"Department: {dept}, Average Hourly Rate: ${avg_rate:.2f}")
    return "\n".join(output)

Зарегистрируйте отчёт в словаре REPORTS:
REPORTS["average_rate"] = generate_average_rate_report

Теперь отчёт доступен через:
python main.py data1.csv --report average_rate

6. Обработка ошибок
Скрипт обрабатывает следующие ошибки:
Несуществующий файл: Выводит сообщение и завершает работу.
Ошибка: Файл nonexistent.csv не найден.
Неверный тип отчёта: Показывает доступные отчёты.
Ошибка: Неизвестный тип отчёта 'invalid'. Доступные отчёты: ['payout']
Некорректные данные: Проверяет отрицательные значения часов и ставки, вызывает ValueError.

7. Тестирование
Тесты покрывают:
Расчёт зарплаты сотрудника (test_employee_calculate_payout).
Валидацию данных сотрудника (test_employee_negative_hours).
Генерацию отчёта payout (test_payout_report).
Обработку пустого списка сотрудников (test_payout_report_empty).

Для запуска тестов используйте:
python -m pytest tests/

8. Ограничения и возможные улучшения
Ограничения:
Поддерживается только отчёт payout.
CSV-файлы должны быть валидными (без пропущенных значений, с правильным количеством колонок).

Возможные улучшения:
Добавить поддержку других форматов входных данных (например, JSON).
Добавить форматирование отчётов (например, выравнивание текста).
Реализовать дополнительные отчёты (например, средняя ставка по отделам).
Добавить логирование ошибок в файл.

9. Заключение

Проект предоставляет простой и расширяемый способ генерации отчётов по зарплатам сотрудников. Код соответствует стандартам PEP 8, использует аннотации типов и покрыт тестами. Для дальнейшего развития рекомендуется добавить новые типы отчётов и улучшить обработку данных.
